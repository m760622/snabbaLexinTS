import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              */import"./loader-B7oZEySq.js";import{s as p,a as g}from"./games-utils-CgPy3Odt.js";import{A as a}from"./config-CfHoVMbv.js";import{T as l}from"./tts-BuOrQ7kI.js";import"./db-bEbbjtoI.js";import"./i18n-1qhfGv7S.js";import"./toast-manager-CZ3snF2j.js";console.log("sentenceBuilderGame.ts LOADED");let f=[],u=[],y=0;function E(e=0){if(typeof dictionaryData>"u"||dictionaryData.length===0){e<10?(console.warn(`Data not ready for Sentence Builder. Retrying (${e+1}/10)...`),typeof p=="function"&&p("Laddar speldata... / Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...","info"),setTimeout(()=>E(e+1),500)):(console.error("Critical: Data failed to load for Sentence Builder."),typeof p=="function"&&p("Kunde inte ladda data. Uppdatera sidan. / ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.","error"));return}const o=document.getElementById("sentenceHint"),n=document.getElementById("sentenceDropZone"),t=document.getElementById("sentenceWordBank"),c=document.getElementById("sentenceFeedback"),i=document.getElementById("nextSentenceBtn"),d=document.getElementById("checkSentenceBtn");if(!o||!n||!t||!c)return;c.innerHTML="",c.className="game-feedback",i&&(i.style.display="none"),d&&(d.style.display="block"),n.innerHTML='<div class="drop-placeholder">Dra ord hit / Ø§Ø³Ø­Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù‡Ù†Ø§</div>',t.innerHTML="",u=[];let r=null,B=0;for(;!r&&B<200;){const s=dictionaryData[Math.floor(Math.random()*dictionaryData.length)];s&&s[a.COLUMNS.EXAMPLE_SWE]&&s[a.COLUMNS.EXAMPLE_SWE].split(" ").length>=3&&s[a.COLUMNS.EXAMPLE_SWE].split(" ").length<=8&&(r=s),B++}if(!r){o.textContent="Kunde inte hitta en mening. FÃ¶rsÃ¶k igen.";return}const h=r[a.COLUMNS.EXAMPLE_SWE],k=r[a.COLUMNS.EXAMPLE_ARB]||r[a.COLUMNS.ARABIC]||"";o.innerHTML=`<span style="direction: rtl; display: block;">${k}</span>`,f=h.split(" ").filter(s=>s.length>0),[...f].sort(()=>Math.random()-.5).forEach(s=>{const m=document.createElement("button");m.className="sentence-word",m.textContent=s,m.onclick=()=>S(m,s),t.appendChild(m)}),d&&(d.onclick=M)}function S(e,o){const n=document.getElementById("sentenceDropZone"),t=document.getElementById("sentenceWordBank");if(!n||!t)return;const c=n.querySelector(".drop-placeholder");if(e.parentElement===t)c&&c.remove(),n.appendChild(e),u.push(o);else{t.appendChild(e);const i=u.indexOf(o);i>-1&&u.splice(i,1),n.children.length===0&&(n.innerHTML='<div class="drop-placeholder">Dra ord hit / Ø§Ø³Ø­Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù‡Ù†Ø§</div>')}}function M(){const e=document.getElementById("sentenceFeedback"),o=document.getElementById("nextSentenceBtn"),n=document.getElementById("checkSentenceBtn"),t=document.getElementById("sentenceDropZone"),c=document.getElementById("sentenceScore");if(!t||!e)return;const i=Array.from(t.querySelectorAll(".sentence-word")).map(r=>r.textContent).join(" "),d=f.join(" ");i===d?(e.textContent="âœ… Helt rÃ¤tt! / ØµØ­ÙŠØ­ ØªÙ…Ø§Ù…Ø§Ù‹!",e.className="game-feedback success",y++,c&&(c.textContent=String(y)),typeof g=="function"&&g("sentence",y),typeof l<"u"&&l&&l.speak(d,"sv"),o&&(o.style.display="block"),n&&(n.style.display="none")):(e.textContent="âŒ Inte riktigt... FÃ¶rsÃ¶k igen! / Ù„ÙŠØ³ ØªÙ…Ø§Ù…Ø§Ù‹...",e.className="game-feedback error")}function L(){const e=document.getElementById("sentenceDropZone"),o=document.getElementById("sentenceWordBank"),n=document.getElementById("sentenceFeedback"),t=document.getElementById("nextSentenceBtn"),c=document.getElementById("checkSentenceBtn");!e||!o||!n||(e.innerHTML="",o.innerHTML="",f.forEach(i=>{const d=document.createElement("span");d.className="sentence-word correct",d.textContent=i,e.appendChild(d)}),n.innerHTML="ðŸ“– RÃ¤tt ordning visas ovan",n.className="game-feedback",typeof l<"u"&&l&&l.speak(f.join(" "),"sv"),t&&(t.style.display="block"),c&&(c.style.display="none"))}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("nextSentenceBtn");e&&(e.onclick=()=>E())});window.startSentenceGame=E;window.showSentenceAnswer=L;
