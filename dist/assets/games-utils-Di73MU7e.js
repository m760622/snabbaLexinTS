import{A as i}from"./config-CfHoVMbv.js";import{T as m}from"./toast-manager-CZ3snF2j.js";console.log("games-utils.ts LOADED and EXECUTING");i.COLUMNS.ID;i.COLUMNS.TYPE;const C=i.COLUMNS.SWEDISH,O=i.COLUMNS.ARABIC;i.COLUMNS.ARABIC_EXT;i.COLUMNS.DEFINITION;i.COLUMNS.FORMS;const L=i.COLUMNS.EXAMPLE_SWE;i.COLUMNS.EXAMPLE_ARB;i.COLUMNS.IDIOM_SWE;i.COLUMNS.IDIOM_ARB;function c(e,t="default"){m.show(e,{type:t==="default"?"success":t})}function g(e){try{console.log("startGame called with:",e);const t=document.getElementById("gameMenu");document.querySelectorAll(".active-game-container").forEach(n=>n.style.display="none"),t&&(t.style.display="none"),document.querySelectorAll(".stats-hero, .daily-banner, .category-filter-container").forEach(n=>n.style.display="none"),window.scrollTo(0,0),u();const o={"missing-word":"missing_word.html",flashcards:"flashcards.html",pronunciation:"pronunciation.html",spelling:"spelling.html","word-wheel":"word_wheel.html","sentence-builder":"sentence_builder.html","word-rain":"word_rain.html",wordle:"wordle.html",grammar:"grammar.html","word-connect":"word_connect.html"};if(o[e]){window.location.href=o[e];return}}catch(t){console.error("âŒ Game Error:",t),c("Spelet kunde inte laddas. FÃ¶rsÃ¶k igen! / Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù… ØªØ­Ù…Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§","error"),setTimeout(()=>{try{d()}catch{window.location.reload()}},2e3)}}function d(){try{const e=document.getElementById("gameMenu"),t=["missingWordGame","flashcardsGame","pronunciationGame","spellingGame","wordWheelGame","sentenceGame","rainGame","wordleGame","grammarGame","word-game-module"];e&&(e.style.display="block"),document.querySelectorAll(".stats-hero, .daily-banner, .category-filter-container").forEach(o=>o.style.display=""),window.scrollTo(0,0),t.forEach(o=>{const n=document.getElementById(o);n&&(n.style.display="none")}),l()}catch(e){console.error("âŒ Error showing game menu:",e),window.location.href="games.html"}}function u(){["gameScore","pronunciationScore","spellingScore","wordWheelScore","sentenceScore","rainScore"].forEach(t=>{const o=document.getElementById(t);o&&(o.textContent="0")})}function h(){const e=document.createElement("canvas");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="9999",document.body.appendChild(e);const t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const o=[],n=["#F59E0B","#EF4444","#10B981","#3B82F6","#8B5CF6"];for(let s=0;s<100;s++)o.push({x:Math.random()*e.width,y:Math.random()*e.height-e.height,color:n[Math.floor(Math.random()*n.length)],size:Math.random()*10+5,speed:Math.random()*5+2,angle:Math.random()*6.2});function r(){t.clearRect(0,0,e.width,e.height);let s=!1;o.forEach(a=>{a.y+=a.speed,a.x+=Math.sin(a.angle)*2,a.angle+=.1,a.y<e.height&&(t.fillStyle=a.color,t.fillRect(a.x,a.y,a.size,a.size),s=!0)}),s?requestAnimationFrame(r):e.remove()}r()}function l(){const e=JSON.parse(localStorage.getItem("gameScores")||"{}");Object.entries({"missing-word":"score-missing-word",flashcards:"score-flashcards",pronunciation:"score-pronunciation",spelling:"score-spelling","word-wheel":"score-word-wheel",sentence:"score-sentence",rain:"score-rain",wordle:"score-wordle",grammar:"score-grammar","word-connect":"score-word-connect"}).forEach(([o,n])=>{const r=document.getElementById(n);r&&(r.textContent=String(e[o]||0))})}function f(e,t){const o=JSON.parse(localStorage.getItem("gameScores")||"{}"),n=o[e]||0;t>n&&(o[e]=t,localStorage.setItem("gameScores",JSON.stringify(o)),l(),c("Nytt rekord! ðŸ† / Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯!"))}function w(){const e=document.getElementById("darkModeToggle");if(!e)return;const t=e.querySelector(".moon-icon"),o=e.querySelector(".sun-icon");localStorage.getItem("darkMode")==="true"&&(document.body.classList.add("dark-mode"),t&&(t.style.display="none"),o&&(o.style.display="block")),e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode");const r=document.body.classList.contains("dark-mode");localStorage.setItem("darkMode",String(r)),r?(t&&(t.style.display="none"),o&&(o.style.display="block")):(t&&(t.style.display="block"),o&&(o.style.display="none"))})}function y(){const t=document.body.classList.toggle("mobile-view-mode");localStorage.setItem("mobileViewMode",String(t));const o=document.getElementById("mobileToggle");o&&(o.textContent=t?"ðŸ–¥ï¸":"ðŸ“±",o.title=t?"Desktop View":"Mobile View"),c(t?"ðŸ“± Mobile View":"ðŸ–¥ï¸ Desktop View","success")}function S(){const e=localStorage.getItem("mobileViewMode");if(e===null?!0:e==="true"){document.body.classList.add("mobile-view-mode");const o=document.getElementById("mobileToggle");o&&(o.textContent="ðŸ–¥ï¸",o.title="Desktop View")}}function M(e){if(e)try{const t=JSON.parse(localStorage.getItem("gameUsageCounts")||"{}");t[e]=(t[e]||0)+1,localStorage.setItem("gameUsageCounts",JSON.stringify(t)),console.log(`Tracked usage for ${e}: ${t[e]}`)}catch(t){console.error("Error tracking game usage:",t)}}function p(){try{const e=JSON.parse(localStorage.getItem("gameUsageCounts")||"{}"),t=3,o=Object.entries(e).filter(([,r])=>r>t).sort((r,s)=>s[1]-r[1]);if(o.length===0)return;const n=document.querySelector(".game-cards-grid");if(!n)return;[...o].reverse().forEach(([r])=>{const s=document.querySelector(`.game-card-item[data-game-id="${r}"]`);s&&(n.prepend(s),s.classList.add("popular-game-highlight"))})}catch(e){console.error("Error prioritizing games:",e)}}function E(){const e={root:null,rootMargin:"0px",threshold:.1},t=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&(r.target.classList.add("scroll-in-view"),t.unobserve(r.target))})},e);document.querySelectorAll(".game-card-item, .stats-hero, .daily-banner, .category-filter-container, .wc-header-compact").forEach(n=>t.observe(n))}document.addEventListener("DOMContentLoaded",()=>{p(),document.querySelectorAll(".game-card-item").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-game-id");t&&M(t)})}),l(),w(),S(),E()});window.startGame=g;window.showGameMenu=d;window.toggleMobileView=y;window.showToast=c;window.saveScore=f;window.triggerConfetti=h;export{L as C,f as a,C as b,O as c,c as s,h as t};
