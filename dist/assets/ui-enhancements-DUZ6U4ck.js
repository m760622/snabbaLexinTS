var g=Object.defineProperty;var b=(s,t,e)=>t in s?g(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var r=(s,t,e)=>b(s,typeof t!="symbol"?t+"":t,e);const y={hide(){const s=document.getElementById("splashScreen");s&&(s.classList.add("hidden"),setTimeout(()=>s.remove(),600))},showUntilReady(s=800){const t=Date.now();window.addEventListener("load",()=>{const e=Date.now()-t,i=Math.max(0,s-e);setTimeout(()=>this.hide(),i)})}};typeof window<"u"&&y.showUntilReady(1e3);const d={isSupported(){return"vibrate"in navigator},light(){this.isSupported()&&navigator.vibrate(10)},medium(){this.isSupported()&&navigator.vibrate(25)},success(){this.isSupported()&&navigator.vibrate([15,50,15])},error(){this.isSupported()&&navigator.vibrate([50,30,50,30,50])},selection(){this.isSupported()&&navigator.vibrate(5)}},w={createCardSkeleton(){const s=document.createElement("div");return s.className="skeleton-game-card",s.innerHTML=`
            <div class="skeleton-icon"></div>
            <div class="skeleton-title"></div>
            <div class="skeleton-subtitle"></div>
        `,s},showInContainer(s,t=6){s.innerHTML="";for(let e=0;e<t;e++){const i=this.createCardSkeleton();i.style.animationDelay=`${e*.1}s`,s.appendChild(i)}},hide(s){s.querySelectorAll(".skeleton-game-card").forEach((e,i)=>{setTimeout(()=>{e.classList.add("skeleton-fade-out"),setTimeout(()=>e.remove(),300)},i*50)})}},C={confetti(s={}){const e={...{particleCount:100,spread:70,origin:{x:.5,y:.6}},...s};typeof window.confetti=="function"?window.confetti(e):this.cssConfetti()},cssConfetti(){const s=document.createElement("div");s.className="confetti-container",s.innerHTML="";const t=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#dfe6e9","#fd79a8","#a29bfe"];for(let e=0;e<50;e++){const i=document.createElement("div");i.className="confetti-piece",i.style.cssText=`
                left: ${Math.random()*100}%;
                background: ${t[Math.floor(Math.random()*t.length)]};
                animation-delay: ${Math.random()*.5}s;
                animation-duration: ${2+Math.random()}s;
            `,s.appendChild(i)}document.body.appendChild(s),setTimeout(()=>s.remove(),3e3)},starBurst(s){const t=s.getBoundingClientRect(),e=t.left+t.width/2,i=t.top+t.height/2;for(let o=0;o<8;o++){const a=document.createElement("div");a.className="star-particle",a.textContent="‚≠ê",a.style.cssText=`
                left: ${e}px;
                top: ${i}px;
                --angle: ${o*45}deg;
            `,document.body.appendChild(a),setTimeout(()=>a.remove(),800)}},showSuccess(s="Bra jobbat!"){const t=document.createElement("div");t.className="success-overlay",t.innerHTML=`
            <div class="success-content">
                <div class="success-checkmark">
                    <svg viewBox="0 0 52 52">
                        <circle cx="26" cy="26" r="25" fill="none" stroke="#4ade80" stroke-width="2"/>
                        <path fill="none" stroke="#4ade80" stroke-width="3" d="M14 27l7 7 16-16"/>
                    </svg>
                </div>
                <p class="success-message">${s}</p>
            </div>
        `,document.body.appendChild(t),d.success(),setTimeout(()=>{t.classList.add("fade-out"),setTimeout(()=>t.remove(),300)},1500)},levelUp(s){const t=document.createElement("div");t.className="level-up-overlay",t.innerHTML=`
            <div class="level-up-content">
                <div class="level-up-icon">üéâ</div>
                <h2 class="level-up-title">Niv√• ${s}!</h2>
                <p class="level-up-subtitle">Du har g√•tt upp en niv√•!</p>
            </div>
        `,document.body.appendChild(t),this.confetti({particleCount:150,spread:100}),d.success(),setTimeout(()=>{t.classList.add("fade-out"),setTimeout(()=>t.remove(),500)},2500)},streakCelebration(s){const t=document.createElement("div");t.className="streak-overlay",t.innerHTML=`
            <div class="streak-content">
                <div class="streak-fire">üî•</div>
                <h2 class="streak-days">${s} dagar!</h2>
                <p class="streak-text">Din streak forts√§tter!</p>
            </div>
        `,document.body.appendChild(t),d.medium(),setTimeout(()=>{t.classList.add("fade-out"),setTimeout(()=>t.remove(),300)},2e3)}},v={steps:[{element:".games-header h1",title:"V√§lkommen! ŸÖÿ±ÿ≠ÿ®ÿßŸã!",text:"H√§r hittar du roliga spel f√∂r att l√§ra dig svenska.",position:"bottom"},{element:".stats-hero",title:"Din statistik",text:"F√∂lj dina framsteg: spelade spel, streak och po√§ng.",position:"bottom"},{element:".category-chips",title:"Kategorier",text:"Filtrera spel efter typ: ordf√∂rr√•d, grammatik, uttal...",position:"bottom"},{element:".game-card-item",title:"V√§lj ett spel",text:"Tryck p√• ett spel f√∂r att b√∂rja l√§ra dig!",position:"top"}],currentStep:0,overlay:null,shouldShow(){return localStorage.getItem("onboardingCompleted")!=="true"},start(){this.shouldShow()&&(this.currentStep=0,this.showStep())},showStep(){var n,c;const s=this.steps[this.currentStep];if(!s){this.complete();return}const t=document.querySelector(s.element);if(!t){this.nextStep();return}this.overlay&&this.overlay.remove(),this.overlay=document.createElement("div"),this.overlay.className="tour-overlay";const e=t.getBoundingClientRect(),i=document.createElement("div");i.className="tour-spotlight",i.style.cssText=`
            top: ${e.top-8}px;
            left: ${e.left-8}px;
            width: ${e.width+16}px;
            height: ${e.height+16}px;
        `;const o=document.createElement("div");o.className=`tour-tooltip tour-${s.position}`,o.innerHTML=`
            <h3>${s.title}</h3>
            <p>${s.text}</p>
            <div class="tour-actions">
                <button class="tour-skip">Hoppa √∂ver</button>
                <button class="tour-next">${this.currentStep<this.steps.length-1?"N√§sta":"Klar!"}</button>
            </div>
            <div class="tour-progress">
                ${this.steps.map((l,h)=>`<span class="tour-dot ${h===this.currentStep?"active":""}"></span>`).join("")}
            </div>
        `;const a=s.position==="bottom"?e.bottom+20:e.top-160;o.style.cssText=`
            top: ${a}px;
            left: ${Math.max(20,e.left+e.width/2-150)}px;
        `,this.overlay.appendChild(i),this.overlay.appendChild(o),document.body.appendChild(this.overlay),(n=o.querySelector(".tour-next"))==null||n.addEventListener("click",()=>{d.light(),this.nextStep()}),(c=o.querySelector(".tour-skip"))==null||c.addEventListener("click",()=>{this.complete()}),d.selection()},nextStep(){this.currentStep++,this.showStep()},complete(){this.overlay&&(this.overlay.classList.add("fade-out"),setTimeout(()=>{var s;return(s=this.overlay)==null?void 0:s.remove()},300)),localStorage.setItem("onboardingCompleted","true")},reset(){localStorage.removeItem("onboardingCompleted")}},f={addRipple(s){s.addEventListener("click",t=>{const e=s.getBoundingClientRect(),i=t.clientX-e.left,o=t.clientY-e.top,a=document.createElement("span");a.className="ripple-effect",a.style.cssText=`left: ${i}px; top: ${o}px;`,s.appendChild(a),d.light(),setTimeout(()=>a.remove(),600)})},addPressEffect(s){s.addEventListener("touchstart",()=>{s.style.transform="scale(0.95)",d.selection()},{passive:!0}),s.addEventListener("touchend",()=>{s.style.transform=""},{passive:!0})},init(){document.querySelectorAll(".game-card-item").forEach(s=>{this.addRipple(s),this.addPressEffect(s)}),document.querySelectorAll("button, .btn, .back-btn").forEach(s=>{this.addPressEffect(s)})}},x={isEnabled:!1,startY:0,isPulling:!1,init(s,t){if(this.isEnabled)return;this.isEnabled=!0;let e=null;s.addEventListener("touchstart",i=>{s.scrollTop===0&&(this.startY=i.touches[0].clientY,this.isPulling=!0)},{passive:!0}),s.addEventListener("touchmove",i=>{if(!this.isPulling)return;const a=i.touches[0].clientY-this.startY;a>0&&a<150&&(e||(e=document.createElement("div"),e.className="pull-refresh-indicator",e.innerHTML='<div class="pull-spinner"></div>',s.prepend(e)),e.style.height=`${a}px`,e.style.opacity=String(Math.min(a/80,1)))},{passive:!0}),s.addEventListener("touchend",async()=>{e&&e.offsetHeight>=80&&(e.classList.add("refreshing"),d.medium(),await t()),e&&(e.style.height="0",setTimeout(()=>{e==null||e.remove(),e=null},300)),this.isPulling=!1},{passive:!0})}};class T{constructor(t,e="#7dd3fc"){r(this,"canvas");r(this,"ctx");r(this,"animationId",null);r(this,"bars",[]);r(this,"barCount",48);r(this,"isActive",!1);r(this,"color","#7dd3fc");r(this,"secondaryColor","#4ade80");r(this,"mode","liquid");r(this,"analyser",null);r(this,"dataArray",null);r(this,"phase",0);const i=document.getElementById(t);if(!i)throw new Error("Visualizer container not found");this.canvas=document.createElement("canvas"),this.canvas.className="audio-visualizer-canvas liquid-wave",i.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.color=e,this.initBars(),this.resize(),window.addEventListener("resize",()=>this.resize())}initBars(){this.bars=Array(this.barCount).fill(0).map(()=>Math.random()*5+2)}resize(){const t=window.devicePixelRatio||1,e=this.canvas.parentElement.getBoundingClientRect();this.canvas.width=e.width*t,this.canvas.height=e.height*t,this.ctx.scale(t,t),this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`}setMode(t){this.mode=t}connectAnalyser(t){this.analyser=t,this.dataArray=new Uint8Array(t.frequencyBinCount)}start(){this.isActive||(this.isActive=!0,this.animate())}stop(){this.isActive=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.initBars(),this.draw()}animate(){this.isActive&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.updateBars(),this.draw(),this.phase+=.05,this.animationId=requestAnimationFrame(()=>this.animate()))}updateBars(){if(this.analyser&&this.dataArray){this.analyser.getByteFrequencyData(this.dataArray);const t=Math.floor(this.dataArray.length/this.barCount);for(let e=0;e<this.barCount;e++){const i=this.dataArray[e*t]/255;this.bars[e]+=(i*40-this.bars[e])*.3}}else for(let t=0;t<this.barCount;t++){const e=Math.random()*25+5;this.bars[t]+=(e-this.bars[t])*.2}}draw(){const t=this.canvas.width/(window.devicePixelRatio||1),e=this.canvas.height/(window.devicePixelRatio||1);this.mode==="liquid"?this.drawLiquidWave(t,e):this.mode==="circle"?this.drawCircleWave(t,e):this.drawBars(t,e)}drawLiquidWave(t,e){const i=e/2,o=this.ctx.createLinearGradient(0,0,t,0);o.addColorStop(0,this.color),o.addColorStop(.5,this.secondaryColor),o.addColorStop(1,this.color),this.ctx.fillStyle=o,this.ctx.beginPath(),this.ctx.moveTo(0,i);for(let a=0;a<=this.barCount;a++){const n=a/this.barCount*t,c=this.isActive?this.bars[a%this.barCount]:3,l=i-c-Math.sin(this.phase+a*.3)*5;a===0?this.ctx.moveTo(n,l):this.ctx.quadraticCurveTo(n-t/this.barCount/2,l-3,n,l)}this.ctx.lineTo(t,i),this.ctx.lineTo(0,i),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(0,i);for(let a=0;a<=this.barCount;a++){const n=a/this.barCount*t,c=this.isActive?this.bars[a%this.barCount]:3,l=i+c+Math.sin(this.phase+a*.3)*5;a===0?this.ctx.moveTo(n,l):this.ctx.quadraticCurveTo(n-t/this.barCount/2,l+3,n,l)}this.ctx.lineTo(t,i),this.ctx.lineTo(0,i),this.ctx.closePath(),this.ctx.fill()}drawCircleWave(t,e){const i=t/2,o=e/2,a=Math.min(t,e)/4,n=this.ctx.createRadialGradient(i,o,0,i,o,a*2);n.addColorStop(0,this.secondaryColor),n.addColorStop(1,this.color),this.ctx.strokeStyle=n,this.ctx.lineWidth=3,this.ctx.beginPath();for(let c=0;c<this.barCount;c++){const l=c/this.barCount*Math.PI*2,h=this.isActive?this.bars[c]:5,u=a+h+Math.sin(this.phase+c*.2)*3,p=i+Math.cos(l)*u,m=o+Math.sin(l)*u;c===0?this.ctx.moveTo(p,m):this.ctx.lineTo(p,m)}this.ctx.closePath(),this.ctx.stroke()}drawBars(t,e){const i=t/this.barCount-2;this.ctx.fillStyle=this.color;for(let o=0;o<this.barCount;o++){const a=this.isActive?this.bars[o]:2,n=o*(i+2),c=e/2-a/2;this.roundRect(this.ctx,n,c,i,a,i/2),this.ctx.fill()}}roundRect(t,e,i,o,a,n){o<2*n&&(n=o/2),a<2*n&&(n=a/2),t.beginPath(),t.moveTo(e+n,i),t.arcTo(e+o,i,e+o,i+a,n),t.arcTo(e+o,i+a,e,i+a,n),t.arcTo(e,i+a,e,i,n),t.arcTo(e,i,e+o,i,n),t.closePath()}}const E={levels:[{name:"bronze",minScore:50,label:"ü•â Bronze / ÿ®ÿ±ŸàŸÜÿ≤Ÿä",color:"#cd7f32"},{name:"silver",minScore:70,label:"ü•à Silver / ŸÅÿ∂Ÿä",color:"#c0c0c0"},{name:"gold",minScore:85,label:"ü•á Gold / ÿ∞Ÿáÿ®Ÿä",color:"#ffd700"},{name:"platinum",minScore:95,label:"üíé Platinum / ÿ®ŸÑÿßÿ™ŸäŸÜŸä",color:"#e5e4e2"}],getBadge(s){for(let t=this.levels.length-1;t>=0;t--)if(s>=this.levels[t].minScore)return this.levels[t];return null},renderBadge(s,t){const e=this.getBadge(s);if(!e)return;const i=document.createElement("div");i.className=`mastery-badge mastery-${e.name}`,i.style.cssText=`
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: linear-gradient(135deg, ${e.color}22, ${e.color}44);
            border: 2px solid ${e.color};
            color: ${e.color};
            font-weight: 700;
            animation: badge-pop 0.5s ease-out;
        `,i.innerHTML=e.label,t.appendChild(i);const o=document.createElement("style");o.textContent=`
            @keyframes badge-pop {
                0% { transform: scale(0); opacity: 0; }
                50% { transform: scale(1.2); }
                100% { transform: scale(1); opacity: 1; }
            }
        `,document.head.appendChild(o)}};class k{constructor(){r(this,"mediaRecorder",null);r(this,"audioChunks",[]);r(this,"isRecording",!1)}async start(){if(!this.isRecording)try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.mediaRecorder=new MediaRecorder(t),this.audioChunks=[],this.mediaRecorder.ondataavailable=e=>{this.audioChunks.push(e.data)},this.mediaRecorder.start(),this.isRecording=!0,window.dispatchEvent(new CustomEvent("recorder-start"))}catch(t){console.error("Recording failed:",t);const e=window.showToast;e&&e('‚ùå <span class="sv-text">Mikrofon√•tkomst nekad</span><span class="ar-text">ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÖŸäŸÉÿ±ŸàŸÅŸàŸÜ</span>',{type:"error"})}}stop(){return new Promise(t=>{!this.mediaRecorder||!this.isRecording||(this.mediaRecorder.onstop=()=>{const e=new Blob(this.audioChunks,{type:"audio/wav"});this.isRecording=!1,window.dispatchEvent(new CustomEvent("recorder-stop",{detail:{blob:e}})),t(e)},this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(e=>e.stop()))})}static async playBlob(t){const e=URL.createObjectURL(t);await new Audio(e).play()}}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{f.init()},500),setTimeout(()=>{v.start()},1e3)});typeof window<"u"&&(window.HapticFeedback=d,window.SkeletonLoader=w,window.Celebrations=C,window.OnboardingTour=v,window.MicroInteractions=f,window.PullToRefresh=x,window.AudioVisualizer=T,window.PronunciationRecorder=k);export{T as A,C,d as H,E as M,k as P};
