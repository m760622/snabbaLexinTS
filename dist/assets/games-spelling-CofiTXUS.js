import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              */import"./games-utils-HTOXTqfV.js";console.log("spellingGame.ts LOADED");let s=null,S=0,l=0;function h(t=0){if(typeof dictionaryData>"u"||dictionaryData.length===0){t<10?(console.warn(`Data not ready for Spelling. Retrying (${t+1}/10)...`),typeof showToast=="function"&&showToast("Laddar speldata... / Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...","info"),setTimeout(()=>h(t+1),500)):(console.error("Critical: Data failed to load for Spelling."),typeof showToast=="function"&&showToast("Kunde inte ladda data. Uppdatera sidan. / ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.","error"));return}S=0,l=0,E(),L()}function E(){const t=document.getElementById("spellingScore"),n=document.getElementById("spellingStreak");t&&(t.textContent=String(S)),n&&(n.textContent=String(l))}function L(){const t=document.getElementById("spellingHint"),n=document.getElementById("spellingExample"),a=document.getElementById("spellingOptions"),i=document.getElementById("spellingFeedback"),f=document.getElementById("nextSpellingBtn"),g=document.getElementById("spHintBtn");if(!t||!a||!i)return;i.innerHTML="",i.className="sp-feedback",f&&f.classList.add("hidden"),g&&g.classList.remove("hidden"),a.innerHTML='<div class="sp-loading"><div class="sp-loading-spinner"></div><span>Laddar...</span></div>';let o=null,u=0;for(;!o&&u<200;){const e=dictionaryData[Math.floor(Math.random()*dictionaryData.length)];e&&e[COL_SWE]&&e[COL_ARB]&&e[COL_SWE].length>2&&e[COL_SWE].length<15&&(o=e),u++}if(!o){t.textContent="Kunde inte hitta ett ord. FÃ¶rsÃ¶k igen.",n&&(n.textContent=""),a.innerHTML='<button class="spelling-option-btn" onclick="loadSpellingQuestion()">FÃ¶rsÃ¶k igen</button>';return}s=o;const c=o[COL_SWE],y=o[COL_ARB];t.textContent=y,n&&(n.textContent="");const d=[c];let m=0;for(;d.length<4&&m<100;){const e=dictionaryData[Math.floor(Math.random()*dictionaryData.length)];e&&e[COL_SWE]&&e[COL_SWE]!==c&&!d.includes(e[COL_SWE])&&e[COL_SWE].length>2&&d.push(e[COL_SWE]),m++}d.sort(()=>Math.random()-.5),setTimeout(()=>{a.innerHTML="",d.forEach((e,M)=>{const p=document.createElement("button");p.className="spelling-option-btn",p.textContent=e,p.style.animationDelay=`${M*.1}s`,p.onclick=()=>{typeof soundManager<"u"&&(soundManager!=null&&soundManager.playClick)&&soundManager.playClick(),T(e,c,p)},a.appendChild(p)})},300);const r=document.getElementById("spSpeakHint");r&&(r.onclick=()=>{typeof TTSManager<"u"&&TTSManager&&TTSManager.speak(c,"sv")})}function T(t,n,a){const i=document.getElementById("spellingFeedback"),f=document.getElementById("nextSpellingBtn"),g=document.getElementById("spHintBtn"),o=document.querySelectorAll(".spelling-option-btn");if(!i||!s)return;o.forEach(e=>e.disabled=!0),g&&g.classList.add("hidden");const u=s[COL_ARB]||"",c=s[COL_EX]||"",y=s[COL_EX_ARB]||"",d=s[5]||"",m=s[1]||"ord";let r="";if(typeof generateEducationalSentence=="function"){const e=generateEducationalSentence(n,u,c,y,d,m);r+=`<div class="sp-example-sentence">
            <div class="sp-sentence-swe">ðŸ“– ${e.s}</div>
            <div class="sp-sentence-arb calc-text-size">${e.a}</div>
        </div>`}t===n?(a.classList.add("correct"),S++,l++,E(),typeof HapticManager<"u"&&HapticManager?HapticManager.trigger("success"):navigator.vibrate&&navigator.vibrate([50,30,50]),typeof soundManager<"u"&&(soundManager!=null&&soundManager.playSuccess)&&soundManager.playSuccess(),i.innerHTML=r,i.className="sp-feedback success",window.TextSizeManager&&window.TextSizeManager.applyRules(),typeof saveScore=="function"&&saveScore("spelling",S),l>=3&&l%3===0&&typeof showToast=="function"&&showToast(`ðŸ”¥ ${l} i rad! / ${l} Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ù„ÙŠ!`,"success")):(a.classList.add("wrong"),o.forEach(e=>{e.textContent===n&&setTimeout(()=>e.classList.add("correct"),300)}),i.innerHTML=r,i.className="sp-feedback",l=0,E(),typeof soundManager<"u"&&(soundManager!=null&&soundManager.playError)&&soundManager.playError()),typeof TTSManager<"u"&&TTSManager&&TTSManager.speak(n,"sv"),f&&f.classList.remove("hidden")}function w(){if(!s)return;const n=s[COL_SWE].charAt(0).toUpperCase();typeof showToast=="function"&&showToast(`ðŸ’¡ FÃ¶rsta bokstaven: ${n}`,"info");const a=document.getElementById("spHintBtn");a&&(a.disabled=!0,a.style.opacity="0.5")}window.startSpellingGame=h;window.showSpellingHint=w;window.loadSpellingQuestion=L;
