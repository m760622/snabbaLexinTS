import{A as n}from"./config-CfHoVMbv.js";import{D as a}from"./db-bEbbjtoI.js";class i{async checkCacheAndLoad(){try{console.log("[Loader] Initializing DB..."),await a.init();const e=await a.getDataVersion(),t=await a.hasCachedData(),c=localStorage.getItem("snabbaLexin_dataReady")==="true";if(t&&e===n.DATA_VERSION&&c){console.log("[Loader] Data ready - loading from cache...");const o=await a.getAllWords();window.dictionaryData=o,window.dispatchEvent(new Event("dictionaryLoaded"));return}else{console.log("[Loader] Data missing - Redirecting to Welcome...");const o=encodeURIComponent(window.location.pathname+window.location.search);window.location.replace(`welcome.html?redirect=${o}`)}}catch(e){console.warn("[Loader] Error checking cache:",e),window.location.replace("welcome.html")}}}const r=new i;document.querySelector('script[src*="loader.ts"]')&&r.checkCacheAndLoad();export{r as L};
