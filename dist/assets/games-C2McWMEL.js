import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              *//* empty css                       */import{showToast as w}from"./utils-B-9iATqE.js";import{s as I}from"./tts-BPLy4HEw.js";import{A as m}from"./config-CfHoVMbv.js";import"./pwa-Bxh5GLjF.js";function E(){console.log("[GamesUI] Initializing..."),y(),f(),u(),p(),h(),k(),requestAnimationFrame(()=>{B()}),window.dictionaryData?S():window.addEventListener("dictionaryLoaded",()=>S(),{once:!0}),window.filterGames=L,window.openDailyChallenge=G,window.updateGameScore=D,window.updateGamesStats=O,window.trackGamePlayed=v}function h(){const e=document.getElementById("mobileToggle");e&&e.addEventListener("click",()=>{var a;(a=window.MobileViewManager)==null||a.toggle()})}function k(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("../sw.js").then(e=>{console.log("SW registered: ",e),e.update()}).catch(e=>{console.error("SW registration failed: ",e)})})}function y(){const e=JSON.parse(localStorage.getItem("gamesStats")||'{"gamesPlayed": 0, "winStreak": 0, "totalScore": 0}'),a=document.getElementById("gamesPlayedStat"),t=document.getElementById("winStreakStat"),o=document.getElementById("totalScoreStat");a&&(a.textContent=e.gamesPlayed||0),t&&(t.textContent=e.winStreak||0),o&&(o.textContent=e.totalScore||0)}function O(e,a=0){const t=JSON.parse(localStorage.getItem("gamesStats")||'{"gamesPlayed": 0, "winStreak": 0, "totalScore": 0}');t.gamesPlayed++,t.totalScore+=a,e?t.winStreak++:t.winStreak=0,localStorage.setItem("gamesStats",JSON.stringify(t)),y(),C()}function f(){var o;const e=new Date().toISOString().split("T")[0];let a=JSON.parse(localStorage.getItem("dailyGameChallenge")||"{}");a.date!==e&&(a={date:e,gamesPlayed:0,completed:!1},localStorage.setItem("dailyGameChallenge",JSON.stringify(a)));const t=document.getElementById("dailyProgress");t&&(t.textContent=`${a.gamesPlayed}/3`),a.completed&&((o=document.getElementById("dailyChallengeBanner"))==null||o.classList.add("completed"))}function C(){const e=new Date().toISOString().split("T")[0];let a=JSON.parse(localStorage.getItem("dailyGameChallenge")||"{}");if(a.date!==e&&(a={date:e,gamesPlayed:0,completed:!1}),!a.completed){if(a.gamesPlayed++,a.gamesPlayed>=3){a.completed=!0;const t=JSON.parse(localStorage.getItem("gamesStats")||"{}");t.totalScore=(t.totalScore||0)+100,localStorage.setItem("gamesStats",JSON.stringify(t)),w("ðŸŽ‰ Daglig utmaning klar! +100 poÃ¤ng / ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ… Ù…ÙƒØªÙ…Ù„!")}localStorage.setItem("dailyGameChallenge",JSON.stringify(a))}f()}function G(){const e=document.querySelector(".game-cards-grid");e&&e.scrollIntoView({behavior:"smooth"})}const N={vocab:["Vokaler","Neon Search","Hangman","Memory","Minneskor","Bokstav LÃ¤nk","Ord Hjulet","Svenska Wordle","Gissa Ordet"],grammar:["Grammatik","Bygg Meningen","Fyll i"],listening:["Lyssna","Uttalscoach"],puzzle:["LÃ¥s Upp","Neon Blocks","Ord-Regn"]};function L(e){var t;document.querySelectorAll(".category-chip").forEach(o=>o.classList.remove("active")),(t=document.querySelector(`[data-cat="${e}"]`))==null||t.classList.add("active"),document.querySelectorAll(".game-card-item").forEach(o=>{var l;const n=((l=o.querySelector("h3"))==null?void 0:l.textContent)||"";if(e==="all")o.style.display="";else{const i=(N[e]||[]).some(r=>n.includes(r));o.style.display=i?"":"none"}})}function u(){const e=JSON.parse(localStorage.getItem("gameScores")||"{}");document.querySelectorAll(".game-stars").forEach(a=>{const t=a.dataset.game;if(!t)return;const o=e[t]||0;let n=0;o>=100?n=3:o>=50?n=2:o>=10&&(n=1),n>0&&a.setAttribute("data-stars",n.toString())})}function D(e,a){const t=JSON.parse(localStorage.getItem("gameScores")||"{}"),o=t[e]||0;a>o&&(t[e]=a,localStorage.setItem("gameScores",JSON.stringify(t))),u()}function p(){const e=JSON.parse(localStorage.getItem("gamesStats")||"{}"),a=new Date().toISOString().split("T")[0],t=b(),o=e.bestStreak||e.winStreak||0,n=document.getElementById("bestStreak");n&&(n.textContent=o);const l=JSON.parse(localStorage.getItem("dailyGamesLog")||"{}"),d=l[a]||0,i=document.getElementById("todayGames");i&&(i.textContent=d);let r=0;Object.keys(l).forEach(s=>{s>=t&&(r+=l[s])});const c=document.getElementById("weeklyGames");c&&(c.textContent=r.toString())}function b(){const e=new Date,a=e.getDay(),t=e.getDate()-a+(a===0?-6:1);return new Date(e.setDate(t)).toISOString().split("T")[0]}function v(){const e=new Date().toISOString().split("T")[0],a=JSON.parse(localStorage.getItem("dailyGamesLog")||"{}");a[e]=(a[e]||0)+1,localStorage.setItem("dailyGamesLog",JSON.stringify(a));const t=JSON.parse(localStorage.getItem("gamesStats")||"{}");(!t.bestStreak||t.winStreak>t.bestStreak)&&(t.bestStreak=t.winStreak,localStorage.setItem("gamesStats",JSON.stringify(t))),p()}function S(){const e=window.dictionaryData;if(!e||!e.length)return;const a=new Date().toISOString().split("T")[0];let t=JSON.parse(localStorage.getItem("wotd_cache")||"{}");if(t.date!==a){const c=Math.floor(Math.random()*e.length);let s=e[c];for(let g=0;g<10&&!s[m.COLUMNS.EXAMPLE_SWE];g++)s=e[Math.floor(Math.random()*e.length)];t={date:a,word:s},localStorage.setItem("wotd_cache",JSON.stringify(t))}const o=t.word;if(!o)return;const n=document.getElementById("wordOfTheDay");n&&(n.style.display="block");const l=document.getElementById("wotd-swedish"),d=document.getElementById("wotd-arabic"),i=document.getElementById("wotd-example");l&&(l.textContent=o[m.COLUMNS.SWEDISH]),d&&(d.textContent=o[m.COLUMNS.ARABIC]),i&&(i.textContent=o[m.COLUMNS.EXAMPLE_SWE]||"Ingen exempelmening / Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø«Ø§Ù„");const r=document.getElementById("wotd-speak-btn");r&&(r.onclick=c=>{c.stopPropagation(),I(o[m.COLUMNS.SWEDISH]);const s=r.querySelector("svg");s&&(s.style.fill="#fff"),setTimeout(()=>{s&&(s.style.fill="none")},1e3)})}function B(){const e=document.querySelectorAll(".game-card-item");e.length&&e.forEach(a=>{const t=a;t.addEventListener("mousemove",o=>{const n=t.getBoundingClientRect(),l=o.clientX-n.left,d=o.clientY-n.top,i=n.width/2,r=n.height/2,c=(d-r)/r*-8,s=(l-i)/i*8;t.style.transform=`perspective(1000px) rotateX(${c}deg) rotateY(${s}deg) scale(1.02)`}),t.addEventListener("mouseleave",()=>{t.style.transform="perspective(1000px) rotateX(0) rotateY(0) scale(1)"})})}typeof window<"u"&&document.addEventListener("DOMContentLoaded",()=>{E()});
