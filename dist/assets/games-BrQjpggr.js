import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              *//* empty css                       */import"./loader-CKTsN5EW.js";import{showToast as f}from"./utils-B-9iATqE.js";import"./pwa-Bxh5GLjF.js";import"./db-TWgxRddZ.js";function u(){console.log("[GamesUI] Initializing..."),g(),d(),S(),y(),p(),w(),window.filterGames=h,window.openDailyChallenge=G,window.updateGameScore=E,window.updateGamesStats=k,window.trackGamePlayed=N}function p(){const e=document.getElementById("mobileToggle");e&&e.addEventListener("click",()=>{var t;(t=window.MobileViewManager)==null||t.toggle()})}function w(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("../sw.js").then(e=>{console.log("SW registered: ",e),e.update()}).catch(e=>{console.error("SW registration failed: ",e)})})}function g(){const e=JSON.parse(localStorage.getItem("gamesStats")||'{"gamesPlayed": 0, "winStreak": 0, "totalScore": 0}'),t=document.getElementById("gamesPlayedStat"),a=document.getElementById("winStreakStat"),o=document.getElementById("totalScoreStat");t&&(t.textContent=e.gamesPlayed||0),a&&(a.textContent=e.winStreak||0),o&&(o.textContent=e.totalScore||0)}function k(e,t=0){const a=JSON.parse(localStorage.getItem("gamesStats")||'{"gamesPlayed": 0, "winStreak": 0, "totalScore": 0}');a.gamesPlayed++,a.totalScore+=t,e?a.winStreak++:a.winStreak=0,localStorage.setItem("gamesStats",JSON.stringify(a)),g(),I()}function d(){var o;const e=new Date().toISOString().split("T")[0];let t=JSON.parse(localStorage.getItem("dailyGameChallenge")||"{}");t.date!==e&&(t={date:e,gamesPlayed:0,completed:!1},localStorage.setItem("dailyGameChallenge",JSON.stringify(t)));const a=document.getElementById("dailyProgress");a&&(a.textContent=`${t.gamesPlayed}/3`),t.completed&&((o=document.getElementById("dailyChallengeBanner"))==null||o.classList.add("completed"))}function I(){const e=new Date().toISOString().split("T")[0];let t=JSON.parse(localStorage.getItem("dailyGameChallenge")||"{}");if(t.date!==e&&(t={date:e,gamesPlayed:0,completed:!1}),!t.completed){if(t.gamesPlayed++,t.gamesPlayed>=3){t.completed=!0;const a=JSON.parse(localStorage.getItem("gamesStats")||"{}");a.totalScore=(a.totalScore||0)+100,localStorage.setItem("gamesStats",JSON.stringify(a)),f("ðŸŽ‰ Daglig utmaning klar! +100 poÃ¤ng / ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ… Ù…ÙƒØªÙ…Ù„!")}localStorage.setItem("dailyGameChallenge",JSON.stringify(t))}d()}function G(){const e=document.querySelector(".game-cards-grid");e&&e.scrollIntoView({behavior:"smooth"})}const O={vocab:["Vokaler","Neon Search","Hangman","Memory","Minneskor","Bokstav LÃ¤nk","Ord Hjulet","Svenska Wordle","Gissa Ordet"],grammar:["Grammatik","Bygg Meningen","Fyll i"],listening:["Lyssna","Uttalscoach"],puzzle:["LÃ¥s Upp","Neon Blocks","Ord-Regn"]};function h(e){var a;document.querySelectorAll(".category-chip").forEach(o=>o.classList.remove("active")),(a=document.querySelector(`[data-cat="${e}"]`))==null||a.classList.add("active"),document.querySelectorAll(".game-card-item").forEach(o=>{var n;const s=((n=o.querySelector("h3"))==null?void 0:n.textContent)||"";if(e==="all")o.style.display="";else{const l=(O[e]||[]).some(r=>s.includes(r));o.style.display=l?"":"none"}})}function S(){const e=JSON.parse(localStorage.getItem("gameScores")||"{}");document.querySelectorAll(".game-stars").forEach(t=>{const a=t.dataset.game;if(!a)return;const o=e[a]||0;let s=0;o>=100?s=3:o>=50?s=2:o>=10&&(s=1),s>0&&t.setAttribute("data-stars",s.toString())})}function E(e,t){const a=JSON.parse(localStorage.getItem("gameScores")||"{}"),o=a[e]||0;t>o&&(a[e]=t,localStorage.setItem("gameScores",JSON.stringify(a))),S()}function y(){const e=JSON.parse(localStorage.getItem("gamesStats")||"{}"),t=new Date().toISOString().split("T")[0],a=C(),o=e.bestStreak||e.winStreak||0,s=document.getElementById("bestStreak");s&&(s.textContent=o);const n=JSON.parse(localStorage.getItem("dailyGamesLog")||"{}"),i=n[t]||0,l=document.getElementById("todayGames");l&&(l.textContent=i);let r=0;Object.keys(n).forEach(m=>{m>=a&&(r+=n[m])});const c=document.getElementById("weeklyGames");c&&(c.textContent=r.toString())}function C(){const e=new Date,t=e.getDay(),a=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(a)).toISOString().split("T")[0]}function N(){const e=new Date().toISOString().split("T")[0],t=JSON.parse(localStorage.getItem("dailyGamesLog")||"{}");t[e]=(t[e]||0)+1,localStorage.setItem("dailyGamesLog",JSON.stringify(t));const a=JSON.parse(localStorage.getItem("gamesStats")||"{}");(!a.bestStreak||a.winStreak>a.bestStreak)&&(a.bestStreak=a.winStreak,localStorage.setItem("gamesStats",JSON.stringify(a))),y()}typeof window<"u"&&document.addEventListener("DOMContentLoaded",()=>{u()});
