import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              */import"./loader-dpivfNje.js";import"./games-utils-BCKUWDty.js";import{S as B}from"./smart-selector-DkxipquW.js";import"./config-C2usAgi3.js";import"./db-CDJvXXn2.js";import"./i18n-D0OWfz62.js";import"./toast-manager-B6dAfcdf.js";console.log("wordleGame.ts LOADED");let g="",w=[],u="",C=!1,h=parseInt(localStorage.getItem("wordleStreak")||"0");function b(){localStorage.setItem("wordleStreak",h.toString())}window.wordleStreak=h;function L(s=0){if(typeof dictionaryData>"u"||dictionaryData.length===0){s<10?(console.warn(`Data not ready for Wordle. Retrying (${s+1}/10)...`),typeof showToast=="function"&&showToast("Laddar speldata... / ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...","info"),setTimeout(()=>L(s+1),500)):(console.error("Critical: Data failed to load for Wordle."),typeof showToast=="function"&&showToast("Kunde inte ladda data. Uppdatera sidan. / ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™.","error"));return}const m=document.getElementById("wordleGrid"),d=document.getElementById("wordleKeyboard"),t=document.getElementById("wordleMessage"),r=document.getElementById("nextWordleBtn"),p=document.getElementById("wordleTypeFilter"),e=document.getElementById("wordleDifficulty"),n=(p==null?void 0:p.value)||"all",c=(e==null?void 0:e.value)||"medium";let l=5,y=5;c==="easy"?(l=4,y=4):c==="medium"?(l=5,y=5):c==="hard"&&(l=6,y=6),w=[],u="",C=!1,t&&(t.textContent=""),r&&(r.style.display="none"),m&&(m.innerHTML=""),d&&(d.innerHTML="");const W=dictionaryData.filter(o=>o&&o[COL_SWE]&&o[COL_SWE].length>=l&&o[COL_SWE].length<=y&&!o[COL_SWE].includes(" ")&&!o[COL_SWE].includes("-")&&/^[a-zA-Z√•√§√∂√Ö√Ñ√ñ]+$/.test(o[COL_SWE])&&(n==="all"||o[COL_TYPE]&&o[COL_TYPE].toLowerCase().includes(n))),S=B.select(W,1)[0];if(!S){t&&(t.textContent="Kunde inte hitta ett ord. F√∂rs√∂k igen.");return}if(g=S[COL_SWE].toUpperCase(),B.markAsSeen(S[COL_SWE]),console.log("Wordle Target:",g,"Difficulty:",c),m)for(let o=0;o<30;o++){const i=document.createElement("div");i.className="wordle-tile",m.appendChild(i)}d&&["QWERTYUIOP√Ö","ASDFGHJKL√ñ√Ñ","ZXCVBNM"].forEach(o=>{const i=document.createElement("div");if(i.className="keyboard-row",o.split("").forEach(a=>{const f=document.createElement("button");f.className="key-btn",f.textContent=a,f.onclick=()=>E(a),f.dataset.key=a,i.appendChild(f)}),o==="ZXCVBNM"){const a=document.createElement("button");a.className="key-btn wide",a.textContent="ENTER",a.onclick=k,i.appendChild(a);const f=document.createElement("button");f.className="key-btn wide",f.textContent="‚å´",f.onclick=()=>E("BACKSPACE"),i.prepend(f)}d.appendChild(i)}),document.onkeydown=o=>{const i=document.getElementById("wordleGame");if(!i||i.style.display==="none")return;const a=o.key.toUpperCase();a==="ENTER"?k():a==="BACKSPACE"?E("BACKSPACE"):/^[A-Z√Ö√Ñ√ñ]$/.test(a)&&E(a)}}function E(s){C||(s==="BACKSPACE"?u=u.slice(0,-1):u.length<5&&(u+=s),T())}function T(){const s=document.getElementById("wordleGrid");if(!s)return;const d=w.length*5;for(let t=0;t<5;t++){const r=s.children[d+t];r&&(r.textContent="",r.classList.remove("typing"))}for(let t=0;t<u.length;t++){const r=s.children[d+t];r&&(r.textContent=u[t],r.classList.add("typing"))}}function k(){if(C)return;if(u.length!==5){typeof showToast=="function"&&showToast("Ordet m√•ste ha 5 bokst√§ver");return}const s=u;w.push(s);const m=(w.length-1)*5,d=document.getElementById("wordleGrid");if(!d)return;const t=g.split(""),r=s.split(""),p=Array(5).fill("absent");r.forEach((e,n)=>{e===t[n]&&(p[n]="correct",t[n]=null,r[n]=null)}),r.forEach((e,n)=>{if(e&&t.includes(e)){p[n]="present";const c=t.indexOf(e);t[c]=null}}),p.forEach((e,n)=>{const c=d.children[m+n];c&&setTimeout(()=>{c.classList.add(e);const l=document.querySelector(`.key-btn[data-key="${s[n]}"]`);if(l){const y=l.classList.contains("correct")?"correct":l.classList.contains("present")?"present":"absent";e==="correct"?l.className="key-btn correct":e==="present"&&y!=="correct"?l.className="key-btn present":e==="absent"&&y==="absent"?l.className="key-btn absent":e==="absent"&&!l.classList.contains("correct")&&!l.classList.contains("present")&&l.classList.add("absent")}},n*100)}),s===g?(C=!0,setTimeout(()=>{typeof showToast=="function"&&showToast("Grattis! Du gissade ordet! üéâ / ÿ™ŸáÿßŸÜŸäŸÜÿß!","success"),typeof playSuccessSound=="function"&&playSuccessSound(),typeof triggerConfetti=="function"&&triggerConfetti();const e=document.getElementById("wordleMessage");e&&(e.textContent="Du vann! / ŸÅÿ≤ÿ™!");const n=document.getElementById("nextWordleBtn");if(n&&(n.style.display="block"),h++,b(),typeof saveScore=="function"){const c=(6-w.length+1)*10;saveScore("wordle",c)}},1500)):w.length>=6?(C=!0,setTimeout(()=>{typeof showToast=="function"&&showToast(`Tyv√§rr! Ordet var ${g}`,"error");const e=document.getElementById("wordleMessage");e&&(e.textContent=`R√§tt svar: ${g}`);const n=document.getElementById("nextWordleBtn");n&&(n.style.display="block"),h=0,b()},1500)):u=""}window.startWordleGame=L;window.handleWordleInput=E;window.updateWordleGrid=T;window.submitWordleGuess=k;
