import{A as i}from"./config-CfHoVMbv.js";import"./i18n-1qhfGv7S.js";import{T as m}from"./toast-manager-CZ3snF2j.js";console.log("games-utils.ts LOADED and EXECUTING");const g=i.COLUMNS.ID,w=i.COLUMNS.TYPE,u=i.COLUMNS.SWEDISH,h=i.COLUMNS.ARABIC,f=i.COLUMNS.ARABIC_EXT,y=i.COLUMNS.DEFINITION,S=i.COLUMNS.FORMS,E=i.COLUMNS.EXAMPLE_SWE,M=i.COLUMNS.EXAMPLE_ARB,O=i.COLUMNS.IDIOM_SWE,C=i.COLUMNS.IDIOM_ARB;window.COL_ID=g;window.COL_TYPE=w;window.COL_SWE=u;window.COL_ARB=h;window.COL_ARB_DEF=f;window.COL_DEF=y;window.COL_FORMS=S;window.COL_EX=E;window.COL_EX_ARB=M;window.COL_IDIOM=O;window.COL_IDIOM_ARB=C;function c(e,o="default"){m.show(e,{type:o==="default"?"success":o})}function p(e){try{console.log("startGame called with:",e);const o=document.getElementById("gameMenu");document.querySelectorAll(".active-game-container").forEach(n=>n.style.display="none"),o&&(o.style.display="none"),document.querySelectorAll(".stats-hero, .daily-banner, .category-filter-container").forEach(n=>n.style.display="none"),window.scrollTo(0,0),L();const t={"missing-word":"missing_word.html",flashcards:"flashcards.html",pronunciation:"pronunciation.html",spelling:"spelling.html","word-wheel":"word_wheel.html","sentence-builder":"sentence_builder.html","word-rain":"word_rain.html",wordle:"wordle.html",grammar:"grammar.html","word-connect":"word_connect.html"};if(t[e]){window.location.href=t[e];return}}catch(o){console.error("âŒ Game Error:",o),c("Spelet kunde inte laddas. FÃ¶rsÃ¶k igen! / Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù… ØªØ­Ù…Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§","error"),setTimeout(()=>{try{d()}catch{window.location.reload()}},2e3)}}function d(){try{const e=document.getElementById("gameMenu"),o=["missingWordGame","flashcardsGame","pronunciationGame","spellingGame","wordWheelGame","sentenceGame","rainGame","wordleGame","grammarGame","word-game-module"];e&&(e.style.display="block"),document.querySelectorAll(".stats-hero, .daily-banner, .category-filter-container").forEach(t=>t.style.display=""),window.scrollTo(0,0),o.forEach(t=>{const n=document.getElementById(t);n&&(n.style.display="none")}),l()}catch(e){console.error("âŒ Error showing game menu:",e),window.location.href="games.html"}}function L(){["gameScore","pronunciationScore","spellingScore","wordWheelScore","sentenceScore","rainScore"].forEach(o=>{const t=document.getElementById(o);t&&(t.textContent="0")})}function I(){const e=document.createElement("canvas");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="9999",document.body.appendChild(e);const o=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const t=[],n=["#F59E0B","#EF4444","#10B981","#3B82F6","#8B5CF6"];for(let s=0;s<100;s++)t.push({x:Math.random()*e.width,y:Math.random()*e.height-e.height,color:n[Math.floor(Math.random()*n.length)],size:Math.random()*10+5,speed:Math.random()*5+2,angle:Math.random()*6.2});function r(){o.clearRect(0,0,e.width,e.height);let s=!1;t.forEach(a=>{a.y+=a.speed,a.x+=Math.sin(a.angle)*2,a.angle+=.1,a.y<e.height&&(o.fillStyle=a.color,o.fillRect(a.x,a.y,a.size,a.size),s=!0)}),s?requestAnimationFrame(r):e.remove()}r()}function l(){const e=JSON.parse(localStorage.getItem("gameScores")||"{}");Object.entries({"missing-word":"score-missing-word",flashcards:"score-flashcards",pronunciation:"score-pronunciation",spelling:"score-spelling","word-wheel":"score-word-wheel",sentence:"score-sentence",rain:"score-rain",wordle:"score-wordle",grammar:"score-grammar","word-connect":"score-word-connect"}).forEach(([t,n])=>{const r=document.getElementById(n);r&&(r.textContent=String(e[t]||0))})}function b(e,o){const t=JSON.parse(localStorage.getItem("gameScores")||"{}"),n=t[e]||0;o>n&&(t[e]=o,localStorage.setItem("gameScores",JSON.stringify(t)),l(),c("Nytt rekord! ðŸ† / Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯!"))}function _(){const e=document.getElementById("darkModeToggle");if(!e)return;const o=e.querySelector(".moon-icon"),t=e.querySelector(".sun-icon");localStorage.getItem("darkMode")==="true"&&(document.body.classList.add("dark-mode"),o&&(o.style.display="none"),t&&(t.style.display="block")),e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode");const r=document.body.classList.contains("dark-mode");localStorage.setItem("darkMode",String(r)),r?(o&&(o.style.display="none"),t&&(t.style.display="block")):(o&&(o.style.display="block"),t&&(t.style.display="none"))})}function A(){const o=document.body.classList.toggle("mobile-view-mode");localStorage.setItem("mobileViewMode",String(o));const t=document.getElementById("mobileToggle");t&&(t.textContent=o?"ðŸ–¥ï¸":"ðŸ“±",t.title=o?"Desktop View":"Mobile View"),c(o?"ðŸ“± Mobile View":"ðŸ–¥ï¸ Desktop View","success")}function D(){const e=localStorage.getItem("mobileViewMode");if(e===null?!0:e==="true"){document.body.classList.add("mobile-view-mode");const t=document.getElementById("mobileToggle");t&&(t.textContent="ðŸ–¥ï¸",t.title="Desktop View")}}function k(e){if(e)try{const o=JSON.parse(localStorage.getItem("gameUsageCounts")||"{}");o[e]=(o[e]||0)+1,localStorage.setItem("gameUsageCounts",JSON.stringify(o)),console.log(`Tracked usage for ${e}: ${o[e]}`)}catch(o){console.error("Error tracking game usage:",o)}}function B(){try{const e=JSON.parse(localStorage.getItem("gameUsageCounts")||"{}"),o=3,t=Object.entries(e).filter(([,r])=>r>o).sort((r,s)=>s[1]-r[1]);if(t.length===0)return;const n=document.querySelector(".game-cards-grid");if(!n)return;[...t].reverse().forEach(([r])=>{const s=document.querySelector(`.game-card-item[data-game-id="${r}"]`);s&&(n.prepend(s),s.classList.add("popular-game-highlight"))})}catch(e){console.error("Error prioritizing games:",e)}}function N(){const e={root:null,rootMargin:"0px",threshold:.1},o=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&(r.target.classList.add("scroll-in-view"),o.unobserve(r.target))})},e);document.querySelectorAll(".game-card-item, .stats-hero, .daily-banner, .category-filter-container, .wc-header-compact").forEach(n=>o.observe(n))}document.addEventListener("DOMContentLoaded",()=>{B(),document.querySelectorAll(".game-card-item").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-game-id");o&&k(o)})}),l(),_(),D(),N()});window.startGame=p;window.showGameMenu=d;window.toggleMobileView=A;window.showToast=c;window.saveScore=b;window.triggerConfetti=I;export{E as C,b as a,u as b,h as c,c as s,I as t};
