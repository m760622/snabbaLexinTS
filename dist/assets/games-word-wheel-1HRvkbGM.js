import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              */import"./games-utils-HTOXTqfV.js";console.log("wordWheelGame.ts LOADED");let l=null,a="",f=0,k=3;function g(e=0){if(typeof dictionaryData>"u"||dictionaryData.length===0){e<10?(console.warn(`Data not ready for Word Wheel. Retrying (${e+1}/10)...`),typeof showToast=="function"&&showToast("Laddar speldata... / Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...","info"),setTimeout(()=>g(e+1),500)):(console.error("Critical: Data failed to load for Word Wheel."),typeof showToast=="function"&&showToast("Kunde inte ladda data. Uppdatera sidan. / ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.","error"));return}const t=document.getElementById("wheelAnswerBox"),n=document.getElementById("wheelHint"),o=document.getElementById("wheelLetters"),s=document.getElementById("wheelFeedback"),r=document.getElementById("wheelExample"),u=document.getElementById("nextWheelBtn2"),y=document.getElementById("wordWheelLength");if(!t||!n||!o||!s||!r||!u)return;k=y?parseInt(y.value):3,s.innerHTML="",s.className="game-feedback",r.classList.add("hidden"),u.classList.add("hidden"),t.innerHTML="",a="";let c=null,E=0;for(;!c&&E<500;){const d=dictionaryData[Math.floor(Math.random()*dictionaryData.length)];if(d&&d[COL_SWE]&&d[COL_ARB]){const m=d[COL_SWE].toUpperCase();m.length===k&&!m.includes(" ")&&!m.includes("-")&&/^[A-ZÃ…Ã„Ã–]+$/.test(m)&&(c={word:m,translation:d[COL_ARB],example:d[COL_EX]||"",exampleArb:d[COL_EX_ARB]||""})}E++}if(!c){n.textContent="Kunde inte hitta ett ord. FÃ¶rsÃ¶k igen.",o.innerHTML='<button class="wheel-letter" onclick="startWordWheelGame()">ğŸ”„</button>';return}l=c,n.textContent=c.translation;const L=c.translation.length;L>15?n.style.fontSize="1.5rem":L>10?n.style.fontSize="1.8rem":n.style.fontSize="2.2rem";const p=c.word.length;let B=44;const S=6.4;p>6?(t.classList.add("small-text"),B=36):t.classList.remove("small-text");const C=p*B+(p-1)*S+30;t.style.width=`${C}px`,t.style.minWidth="0";const x=c.word.split("").sort(()=>Math.random()-.5);o.innerHTML="",x.forEach((d,m)=>{const i=document.createElement("button");i.className="wheel-letter",i.textContent=d,i.dataset.index=String(m),i.onclick=()=>A(i,d);const b=m/x.length*2*Math.PI-Math.PI/2,M=45,I=50+M*Math.cos(b),v=50+M*Math.sin(b);i.style.left=`${I}%`,i.style.top=`${v}%`,i.style.transform="translate(-50%, -50%)",o.appendChild(i)});const W=document.getElementById("wheelCheckBtn");W&&(W.onclick=T),w()}function w(){const e=document.getElementById("wheelShowAnswerBtn");e&&(f>=1?(e.disabled=!1,e.title="Visa svaret (Kostar 1 poÃ¤ng) / Ø£Ø¸Ù‡Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (ØªÙƒÙ„ÙØ© 1 Ù†Ù‚Ø·Ø©)"):(e.disabled=!0,e.title="Du behÃ¶ver 1 poÃ¤ng / ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø©"))}function A(e,t){e.classList.contains("used")||(typeof soundManager<"u"&&(soundManager!=null&&soundManager.playClick)&&soundManager.playClick(),e.classList.add("used"),a+=t,h(),l&&a.length===l.word.length&&T())}function h(){const e=document.getElementById("wheelAnswerBox"),t=document.getElementById("wheelFeedback");e&&(e.innerHTML="",e.classList.remove("shake-error"),t&&(t.innerHTML=""),a.split("").forEach((n,o)=>{const s=document.createElement("span");s.className="wheel-answer-letter",s.textContent=n,s.onclick=()=>H(o,n),e.appendChild(s)}))}function H(e,t){typeof soundManager<"u"&&(soundManager!=null&&soundManager.playClick)&&soundManager.playClick(),a=a.slice(0,e)+a.slice(e+1);const n=document.getElementById("wheelLetters");if(n){const o=n.querySelectorAll(".wheel-letter.used");let s=!1;o.forEach(r=>{!s&&r.textContent===t&&(r.classList.remove("used"),s=!0)})}h()}function T(){const e=document.getElementById("wheelFeedback"),t=document.getElementById("wheelExample"),n=document.getElementById("nextWheelBtn2"),o=document.getElementById("wheelAnswerBox"),s=document.getElementById("wordWheelScore");if(!(!e||!t||!n||!o||!l))if(a.toUpperCase()===l.word){if(typeof soundManager<"u"&&(soundManager!=null&&soundManager.playSuccess)&&soundManager.playSuccess(),e.innerHTML="âœ… RÃ¤tt! / ØµØ­ÙŠØ­!",e.className="game-feedback success",f++,s&&(s.textContent=String(f)),w(),l.example){let r=`ğŸ’¡ ${l.example}`;l.exampleArb&&(r+=`<br><span class="arb-example" style="color: #fbbf24; font-weight: bold; display: block; margin-top: 0.5rem;">${l.exampleArb}</span>`),t.innerHTML=r,t.classList.remove("hidden")}typeof saveScore=="function"&&saveScore("word-wheel",f),typeof TTSManager<"u"&&TTSManager&&TTSManager.speak(l.word.toLowerCase(),"sv"),n.classList.remove("hidden")}else typeof soundManager<"u"&&(soundManager!=null&&soundManager.playError)&&soundManager.playError(),o.classList.add("shake-error"),setTimeout(()=>o.classList.remove("shake-error"),500),e.innerHTML="âŒ Fel svar, fÃ¶rsÃ¶k igen! / Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",e.className="game-feedback error",navigator.vibrate&&navigator.vibrate(200)}function D(){if(a.length>0){const e=a[a.length-1];a=a.slice(0,-1);const t=document.getElementById("wheelLetters");if(t){const n=Array.from(t.querySelectorAll(".wheel-letter.used"));for(let o=n.length-1;o>=0;o--)if(n[o].textContent===e){n[o].classList.remove("used");break}}h()}}function $(){g()}function O(){if(!l)return;if(f<1){typeof showToast=="function"&&showToast("Du behÃ¶ver minst 1 poÃ¤ng! / ØªØ­ØªØ§Ø¬ Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!","error");return}f--;const e=document.getElementById("wordWheelScore");e&&(e.textContent=String(f)),w(),a=l.word;const t=document.getElementById("wheelLetters");t&&t.querySelectorAll(".wheel-letter").forEach(u=>u.classList.add("used")),h();const n=document.getElementById("wheelFeedback"),o=document.getElementById("wheelExample"),s=document.getElementById("nextWheelBtn2");if(!(!n||!o||!s)){if(typeof soundManager<"u"&&(soundManager!=null&&soundManager.playSuccess)&&soundManager.playSuccess(),n.innerHTML="âœ… LÃ¶st! / ØªÙ… Ø§Ù„Ø­Ù„!",n.className="game-feedback success",l.example){let r=`ğŸ’¡ ${l.example}`;l.exampleArb&&(r+=`<br><span class="arb-example" style="color: #fbbf24; font-weight: bold; display: block; margin-top: 0.5rem;">${l.exampleArb}</span>`),o.innerHTML=r,o.classList.remove("hidden")}typeof TTSManager<"u"&&TTSManager&&TTSManager.speak(l.word.toLowerCase(),"sv"),s.classList.remove("hidden")}}window.startWordWheelGame=g;window.undoWordWheel=D;window.skipWordWheel=$;window.showWordWheelAnswer=O;
