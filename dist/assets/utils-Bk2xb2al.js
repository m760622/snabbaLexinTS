import{T as w}from"./toast-manager-B6dAfcdf.js";function y(e,t){let s=null;return function(...r){s&&clearTimeout(s),s=setTimeout(()=>e(...r),t)}}function v(e,t){let s=0;return function(...r){const a=Date.now();a-s>=t&&(s=a,e(...r))}}function k(e){const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t)}function z(e,t){const s=performance.now(),r=t(),a=performance.now();return console.log(`â±ï¸ ${e}: ${(a-s).toFixed(2)}ms`),r}window.debounce=y;window.throttle=v;window.prefetchPage=k;function u(e,t=100){const s=new Map,r=(...a)=>{const n=JSON.stringify(a);if(s.has(n))return s.get(n);const i=e(...a);if(s.size>=t){const o=s.keys().next().value;o&&s.delete(o)}return s.set(n,i),i};return r.clear=()=>s.clear(),r.cache=s,r}u((e,t,s,r,a)=>null,500),u(e=>e.normalize("NFD").replace(/[\u064B-\u0652]/g,"").replace(/Ø£/g,"Ø§").replace(/Ø¥/g,"Ø§").replace(/Ø¢/g,"Ø§"),1e3),u((e,t,s)=>{const r=document.createElement("div");r.style.position="absolute",r.style.visibility="hidden",r.style.fontSize=`${t}px`,r.style.maxWidth=`${s}px`,r.style.whiteSpace="pre-wrap",r.textContent=e,document.body.appendChild(r);const{width:a,height:n}=r.getBoundingClientRect();return document.body.removeChild(r),{width:a,height:n}},500),u((e,t,s)=>e,100);const S={recognition:null,isListening:!1,onResult:null,isSupported(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window},init(e){if(!this.isSupported())return console.warn("Voice search not supported in this browser"),!1;const t=window.SpeechRecognition||window.webkitSpeechRecognition;return this.recognition=new t,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.recognition.lang="sv-SE",this.onResult=e,this.recognition.onresult=s=>{const r=s.results.length-1,a=s.results[r][0].transcript,n=s.results[r].isFinal;this.onResult&&this.onResult(a,n)},this.recognition.onend=()=>{this.isListening=!1,this.updateUI(!1)},this.recognition.onerror=s=>{console.error("Voice search error:",s.error),this.isListening=!1,this.updateUI(!1),s.error==="not-allowed"?l("Mikrofon nekad / Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø±ÙÙˆØ¶ ðŸŽ¤âŒ"):s.error==="no-speech"&&l("Inget tal detekterat / Ù„Ù… ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù ØµÙˆØª ðŸ”‡")},!0},start(e="sv-SE"){if(!(!this.recognition&&!this.init(this.onResult))){this.recognition.lang=e;try{this.recognition.start(),this.isListening=!0,this.updateUI(!0)}catch(t){console.error("Voice start error:",t)}}},stop(){this.recognition&&this.isListening&&(this.recognition.stop(),this.isListening=!1,this.updateUI(!1))},toggle(e="sv-SE"){this.isListening?this.stop():this.start(e)},updateUI(e){const t=document.getElementById("voiceSearchBtn");t&&(t.classList.toggle("listening",e),t.setAttribute("aria-pressed",e.toString()))}};function L(e,t,s,r,a,n){const i=(e||"").trim(),o=(n||"").toLowerCase().replace(".",""),c=a?a.replace(/[\.,]$/g,"").trim():"";if(s&&s.length>10)return{s,a:r||t};if(c&&c.length>3&&!c.toLowerCase().startsWith("se "))return{s:`${c.charAt(0).toUpperCase()+c.slice(1)} (${i}).`,a:t};let d="";return o.includes("verb")?d=`Att ${i.toLowerCase()} betyder att man gÃ¶r nÃ¥got.`:o.includes("subst")?d=`En ${i} Ã¤r en sak, person eller plats.`:o.includes("adj")?d=`${i} beskriver hur nÃ¥got Ã¤r eller ser ut.`:d="Ordet anvÃ¤nds i svenskan.",{s:d,a:t}}function E(e){if(!e)return"";let t=e.replace(/[\u064B-\u065F\u0670]/g,"");return t=t.replace(/[Ø£Ø¥Ø¢]/g,"Ø§"),t=t.replace(/Ø©/g,"Ù‡"),t=t.replace(/Ù‰/g,"ÙŠ"),t}function l(e,t=1500){let s=1500,r="success";typeof t=="number"?s=t:typeof t=="object"&&(s=t.duration||1500,r=t.type||"success"),w.show(e,{type:r==="default"?"success":r,duration:s})}const p={apply(e,t,s=1,r=1.6){if(!e||!t)return;e.style.fontSize="",e.style.display="inline-block",e.style.width="auto";const a=e.parentElement;if(!a)return;const n=a.offsetWidth||a.clientWidth;if(n===0)return;let i=r;const o=.7,c=.05;if(s===1)for(e.style.whiteSpace="nowrap",e.style.fontSize=`${i}rem`;e.offsetWidth>n&&i>o;)i-=c,e.style.fontSize=`${i}rem`;else for(e.style.whiteSpace="normal",e.style.width="100%",e.style.display="block",e.style.fontSize=`${i}rem`,e.style.lineHeight="1.4";i>o;){const b=i*16*1.4*s+5;if(e.offsetHeight<=b)break;i-=c,e.style.fontSize=`${i}rem`}s===1&&(e.style.whiteSpace="",e.style.display="",e.style.width=""),e.style.lineHeight=i<1.1?"1.2":"1.4"},autoApply(){document.querySelectorAll("[data-auto-size]").forEach(e=>{const t=parseInt(e.dataset.maxLines||"1");this.apply(e,e.textContent||"",t)})},applyToContainer(e){if(!e)return;(e instanceof DocumentFragment?Array.from(e.querySelectorAll("[data-auto-size]")):e.querySelectorAll("[data-auto-size]")).forEach(s=>{const r=parseInt(s.dataset.maxLines||"1");this.apply(s,s.textContent||"",r)})}};if(typeof window<"u"){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>p.autoApply(),200)})}const C={vibrate(e=10){if(typeof navigator<"u"&&navigator.vibrate)try{navigator.vibrate(e)}catch{}},light(){this.vibrate(10)},medium(){this.vibrate(20)},heavy(){this.vibrate([10,30,10])},success(){this.vibrate([10,50,10])},error(){this.vibrate([50,100,50])}},m={init(){const e=localStorage.getItem("theme")||"dark";e==="auto"?this.applyAutoTheme(!1):(document.documentElement.setAttribute("data-theme",e),e==="dark"?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"));const t=localStorage.getItem("colorTheme")||"default";this.setColorTheme(t,!1)},isNightTime(){const e=new Date().getHours();return e>=18||e<7},applyAutoTheme(e=!0){const t=this.isNightTime(),s=t?"dark":"light";return document.documentElement.setAttribute("data-theme",s),t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),e&&l(t?"Automatiskt mÃ¶rkt lÃ¤ge ðŸŒ™":"Automatiskt ljust lÃ¤ge â˜€ï¸"),s},toggle(){const t=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";return document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),t==="dark"?(document.body.classList.add("dark-mode"),l("MÃ¶rkt lÃ¤ge aktiverat / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ðŸŒ™")):(document.body.classList.remove("dark-mode"),l("Ljust lÃ¤ge aktiverat / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ â˜€ï¸")),t},setColorTheme(e,t=!0){e==="default"?document.documentElement.removeAttribute("data-color-theme"):document.documentElement.setAttribute("data-color-theme",e),localStorage.setItem("colorTheme",e),t&&l(e)}},g={init(){const e=localStorage.getItem("mobileView"),t=e===null?!0:e==="true";this.apply(t)},apply(e){e?(document.documentElement.classList.add("iphone-mode"),document.body.classList.add("iphone-view")):(document.documentElement.classList.remove("iphone-mode"),document.body.classList.remove("iphone-view"));const t=document.getElementById("mobileToggle")||document.getElementById("mobileViewToggle");t&&t.classList.toggle("active",e),localStorage.setItem("mobileView",e?"true":"false")},toggle(){const e=!document.body.classList.contains("iphone-view");return this.apply(e),l(e?"Mobilvy aktiverad / ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ðŸ“±":"Standardvy aktiverad / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ ðŸ’»"),e}},h={ett:["rum","kar","hus","tak","golv","bord","berg","land","ljus","block","kort","slag","spel","verk","djur","krig","krÃ¶n","prov","test","tryck","vatten","fÃ¶nster","papper","system","arbete","centrum","museum","program","dokument","drÃ¥p","brott","mord","skap","Ã¤ktenskap","partnerskap"],en:["gÃ¥rd","vÃ¤g","gata","plats","dÃ¶rr","bil","maskin","station","ventil","motor","pump","kabel","tid","dag","natt","stad","ning","tion","sion","het","else","ande","ende","ment","itet","dom","ism","ist","are","ler","rer","nar","mark","feber","handel","misshandel","konvention","habilitering","akut","queen","plikt","hiss","nad","sjukdom"]},A={getBadge(e,t,s){const r=(t||"").toLowerCase(),a=(s||"").toLowerCase(),n=(e||"").toLowerCase().replace(".","").replace(" ","");if(r.match(/\w+ar[,\s]/)&&r.match(/\w+ade[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 1</span>';if(r.match(/\w+er[,\s]/)&&(r.match(/\w+de[,\s]/)||r.match(/\w+te[,\s]/)))return'<span class="grammar-badge grammar-verb">Gr. 2</span>';if(r.match(/\w+dde[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 3</span>';if(r.match(/\w+(it|its|ats|ett)[,\s]/)||r.match(/\w+(it|its|ats|ett)$/)||a.endsWith("as")&&r.match(/\w+ades[,\s]|\w+des[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 4</span>';if(n.includes("adj"))return'<span class="grammar-badge grammar-adj">Adj</span>';if(n.includes("adverb")||n==="adv")return'<span class="grammar-badge grammar-adv">Adv</span>';const i=r.split(",").map(o=>o.trim());if(i.length>=2){const o=i[1];if((o.endsWith("en")||o.endsWith("an"))&&!o.endsWith("et"))return'<span class="grammar-badge grammar-en">En</span>';if(o.endsWith("et"))return'<span class="grammar-badge grammar-ett">Ett</span>'}return r.startsWith("en ")||r.match(/\ben\s+/)?'<span class="grammar-badge grammar-en">En</span>':r.startsWith("ett ")||r.match(/\bett\s+/)?'<span class="grammar-badge grammar-ett">Ett</span>':n.includes("verb")?'<span class="grammar-badge grammar-verb">Verb</span>':n.includes("subst")?'<span class="grammar-badge grammar-en">Subst</span>':n.includes("prep")?'<span class="grammar-badge">Prep</span>':n.includes("konj")?'<span class="grammar-badge">Konj</span>':n.includes("pron")?'<span class="grammar-badge">Pron</span>':e&&e.length>0&&e.length<10?`<span class="grammar-badge">${e}</span>`:""}},j={getCategory(e,t="",s=""){const r=(e||"").toLowerCase().replace(".",""),a=(t||"").toLowerCase(),n=(s||"").toLowerCase();return n.match(/\w+ar[,\s]/)&&n.match(/\w+ade[,\s]/)||n.match(/\w+er[,\s]/)&&(n.match(/\w+de[,\s]/)||n.match(/\w+te[,\s]/))||n.match(/\w+dde[,\s]/)||n.match(/\w+(it|its|ats|ett)[,\s]/)||n.match(/\w+(it|its|ats|ett)$/)||a.endsWith("as")&&n.match(/\w+ades[,\s]|\w+des[,\s]/)?"verb":r.includes("verbmn")||r.includes("verb")&&t.includes(" ")?"phrasal":r==="verb"||r.includes("verb")?"verb":r.includes("subst")?"noun":r==="adj"||r.includes("adjektiv")?"adj":r==="adv"||r.includes("adverb")?"adv":r.includes("prep")?"prep":r.includes("konj")?"conj":r.includes("pron")?"pronoun":h.ett.some(i=>a.endsWith(i))||h.en.some(i=>a.endsWith(i))?"noun":"other"}};typeof window<"u"&&(window.VoiceSearchManager=S,window.showToast=l,window.TextSizeManager=p,window.ThemeManager=m,window.MobileViewManager=g,window.generateEducationalSentence=L,m.init(),g.init());export{j as CategoryHelper,A as GrammarHelper,C as HapticManager,g as MobileViewManager,p as TextSizeManager,m as ThemeManager,S as VoiceSearchManager,L as generateEducationalSentence,h as learnedSuffixes,z as measurePerformance,u as memoize,E as normalizeArabic,l as showToast};
