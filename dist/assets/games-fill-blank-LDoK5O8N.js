import"./modulepreload-polyfill-B5Qt9EMX.js";import"./pwa-Bxh5GLjF.js";const p=10,u=2,b=3,L=7;let f=[],a=0,d=0,E=0,m=!1;const o={sentence:()=>document.getElementById("sentence"),translation:()=>document.getElementById("translation"),options:()=>document.getElementById("options"),current:()=>document.getElementById("current"),progressFill:()=>document.getElementById("progressFill"),scoreEl:()=>document.getElementById("score"),errorsEl:()=>document.getElementById("errors"),blank:()=>document.getElementById("blank"),feedback:()=>document.getElementById("feedback"),resultOverlay:()=>document.getElementById("resultOverlay"),resultEmoji:()=>document.getElementById("resultEmoji"),resultText:()=>document.getElementById("resultText"),resultStats:()=>document.getElementById("resultStats")};function T(){return dictionaryData.filter(e=>{const n=e[L],s=e[u];return n&&s&&n.toLowerCase().includes(s.toLowerCase())})}function v(){const e=T();f=e.sort(()=>Math.random()-.5).slice(0,p).map(s=>{const t=s[u],c=s[b],r=s[L],i=new RegExp(t,"i"),l=r.replace(i,"____"),y=e.filter(g=>g[u]!==t).sort(()=>Math.random()-.5).slice(0,3).map(g=>g[u]),C=[t,...y].sort(()=>Math.random()-.5);return{word:t,arabic:c,sentence:l,example:r,options:C}})}function h(){if(a>=f.length){I();return}const e=f[a],n=o.sentence(),s=o.translation(),t=o.options(),c=o.current(),r=o.progressFill();n&&(n.innerHTML=e.sentence.replace("____",'<span class="blank" id="blank">?</span>')),s&&(s.textContent=e.arabic),t&&(t.innerHTML="",e.options.forEach(i=>{const l=document.createElement("button");l.className="option-btn",l.textContent=i,l.onclick=()=>B(i,l),t.appendChild(l)})),c&&(c.textContent=String(a+1)),r&&(r.style.width=`${a/p*100}%`)}function B(e,n){if(m)return;m=!0;const s=f[a],t=o.blank(),c=document.querySelectorAll(".option-btn");if(t&&(t.textContent=e),e===s.word){d++;const r=o.scoreEl();r&&(r.textContent=String(d)),n.classList.add("correct"),t==null||t.classList.add("correct"),x("âœ…"),TTSManager.speak(s.word,"sv")}else{E++;const r=o.errorsEl();r&&(r.textContent=String(E)),n.classList.add("wrong"),t==null||t.classList.add("wrong"),x("âŒ"),c.forEach(i=>{i.textContent===s.word&&i.classList.add("correct")}),navigator.vibrate&&navigator.vibrate(100)}c.forEach(r=>r.classList.add("disabled")),setTimeout(()=>{a++,m=!1,h()},1500)}function x(e){const n=o.feedback();n&&(n.textContent=e,n.classList.add("visible"),setTimeout(()=>n.classList.remove("visible"),500))}function I(){const e=Math.round(d/p*100),n=o.resultOverlay(),s=o.resultEmoji(),t=o.resultText(),c=o.resultStats();s&&(s.textContent=e>=80?"ğŸ†":e>=50?"ğŸ‘":"ğŸ“š"),t&&(t.textContent=`${e}% rÃ¤tt! / ØµØ­ÙŠØ­!`),c&&(c.innerHTML=`âœ… ${d} | âŒ ${E}`),n==null||n.classList.add("visible"),typeof ProgressManager<"u"&&ProgressManager.trackGame()}function w(){var t;(t=o.resultOverlay())==null||t.classList.remove("visible"),a=0,d=0,E=0,m=!1;const e=o.scoreEl(),n=o.errorsEl(),s=o.progressFill();e&&(e.textContent="0"),n&&(n.textContent="0"),s&&(s.style.width="0%"),v(),h()}function M(){typeof ThemeManager<"u"&&ThemeManager.init(),w()}window.startNewGame=w;document.addEventListener("DOMContentLoaded",M);
